# Clash 配置管理器

一个现代化的Web界面，用于管理和配置Clash代理客户端的配置文件。

## 功能特性

### 🎯 核心功能
- **可视化配置管理** - 通过友好的Web界面管理Clash配置
- **实时预览** - 实时生成和预览YAML配置文件
- **配置验证** - 智能验证配置参数，确保配置正确性
- **导入导出** - 支持配置文件的导入和导出功能

### 📋 配置模块
- **通用设置** - 运行模式、日志级别、端口配置
- **DNS配置** - DNS服务器、Fake-IP过滤器设置
- **服务提供商** - 代理订阅链接管理
- **代理组管理** - 应用代理组、地区代理组、策略代理组
- **规则配置** - 分流规则和规则提供商管理

### 🎨 界面特性
- **现代化设计** - 使用渐变色彩和圆角设计
- **响应式布局** - 适配不同屏幕尺寸
- **紧凑布局** - 避免过多空白空间
- **直观操作** - 简单易用的交互设计

## 技术架构

### 前端技术栈
- **HTML5** - 语义化标记
- **CSS3** - 现代化样式和动画
- **JavaScript ES6+** - 模块化开发
- **Web APIs** - 本地存储、文件操作等

### 模块化架构
```
js/
├── main.js                    # 主应用入口
└── modules/
    ├── config-manager.js      # 配置管理器
    ├── ui-manager.js          # UI管理器
    ├── proxy-group-manager.js # 代理组管理器
    ├── rule-manager.js        # 规则管理器
    ├── provider-manager.js    # 提供商管理器
    └── validation-manager.js  # 验证管理器
```

### 样式组织
```
styles/
├── main.css        # 主样式文件
├── components.css  # 组件样式
└── forms.css       # 表单样式
```

## 快速开始

### 1. 部署应用
将所有文件放置在Web服务器目录中，或直接在浏览器中打开 `index.html`。

### 2. 基础配置
1. 打开应用后，首先配置**通用设置**
2. 设置**DNS配置**（可选）
3. 添加**服务提供商**（代理订阅链接）

### 3. 代理组配置
1. 切换到**代理组**标签
2. 根据需要配置应用代理组、地区代理组
3. 系统会自动生成策略代理组

### 4. 规则配置
1. 在**规则配置**中管理分流规则
2. 系统预置了常用的规则提供商
3. 可以添加自定义规则

### 5. 导出配置
1. 点击**预览配置**查看生成的YAML
2. 使用**导出配置**保存为文件
3. 将配置文件用于Clash客户端

## 配置说明

### 代理组类型
- **手动选择 (select)** - 用户手动在包含的代理组中选择
- **自动选择 (url-test)** - 自动选择延迟最低的节点（推荐）
- **故障转移 (fallback)** - 主节点故障时自动切换备用节点
- **负载均衡 (load-balance)** - 在多个节点间分配流量

### 代理组分类
- **应用代理组**: 使用复选框选择包含哪些地区代理组，默认包含所有地区代理组和DIRECT
- **地区代理组**: 通过过滤器从订阅中筛选特定地区的节点，自动选择最优节点

> 💡 **智能默认**: 新建应用代理组时会自动选中所有地区代理组，提供最大的灵活性，用户可根据需要调整。

### 规则类型
- **RULE-SET** - 规则集引用（推荐使用）
- **DOMAIN** - 完整域名匹配
- **DOMAIN-SUFFIX** - 域名后缀匹配
- **DOMAIN-KEYWORD** - 域名关键词匹配
- **IP-CIDR** - IP地址段匹配
- **GEOIP** - 地理位置IP匹配

### 规则源说明
- **规则库**: 使用 [rdone4425/meta-rules-dat](https://github.com/rdone4425/meta-rules-dat) 提供的全面规则库
- **规则数量**: 包含数百个精确分类的规则集
- **更新频率**: 规则每日自动更新，确保准确性
- **格式**: 使用YAML格式，兼容性更好

### 便捷的规则添加方式
- **规则库面板**: 点击"规则库"按钮展开内置规则浏览器
- **分类浏览**: 按🤖AI服务、🎬流媒体、💬社交媒体等分类显示
- **一键添加**: 直接点击规则名称即可添加到规则列表
- **智能目标**: 自动推断最合适的代理组目标
- **实时搜索**: 支持规则库内实时搜索过滤
- **自动配置**: 自动添加对应的规则提供商URL配置

### 规则添加流程
1. **打开规则库**: 在分流规则页面点击"规则库"按钮
2. **浏览选择**: 在分类中找到需要的规则，或使用搜索功能
3. **一键添加**: 点击规则名称，自动添加到规则列表
4. **智能配置**: 系统自动配置规则提供商和目标代理组

## 🔍 配置验证系统

### 验证功能
- **全面检查**: 验证代理组、规则、规则提供商的配置正确性
- **智能分析**: 检查规则与代理组的匹配关系
- **优先级验证**: 确保规则优先级顺序合理
- **URL可用性**: 验证规则提供商URL的有效性

### 验证项目
1. **代理组验证**
   - 检查必需字段（名称、类型）
   - 验证代理组名称唯一性
   - 检查类型特定配置（测试间隔、负载均衡策略等）
   - 验证地区代理组的过滤器设置

2. **规则验证**
   - 验证规则格式正确性
   - 检查规则类型支持性
   - 确认目标代理组存在性
   - 分析规则优先级顺序

3. **规则提供商验证**
   - 检查URL有效性和格式
   - 验证行为类型和格式设置
   - 检查更新间隔合理性

4. **匹配关系验证**
   - 确保规则目标代理组存在
   - 识别未使用的代理组
   - 检查MATCH规则位置

### 验证报告
- **统计摘要**: 显示错误、警告、信息数量
- **详细报告**: 提供具体问题描述和修复建议
- **严重程度**: 区分错误（必须修复）和警告（建议修复）
- **修复指导**: 为每个问题提供具体的解决方案

## 浏览器兼容性

- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

## 注意事项

1. **订阅链接安全** - 请确保订阅链接来源可信
2. **配置备份** - 建议定期备份配置文件
3. **规则更新** - 规则提供商会定期更新，建议保持同步
4. **端口冲突** - 确保HTTP和SOCKS端口不冲突

## 开发说明

### 本地开发
```bash
# 启动本地服务器（可选）
python -m http.server 8000
# 或使用Node.js
npx serve .
```

### 自定义开发
- 修改 `js/modules/` 中的模块文件来扩展功能
- 调整 `styles/` 中的CSS文件来自定义样式
- 在 `js/main.js` 中添加新的功能模块

### 配置扩展
可以通过修改各管理器模块来添加新的配置选项：
- 在 `config-manager.js` 中添加新的配置字段
- 在 `validation-manager.js` 中添加相应的验证规则
- 在对应的UI管理器中添加界面元素

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 更新日志

### v1.0.0
- 初始版本发布
- 完整的Clash配置管理功能
- 现代化的Web界面
- 模块化的代码架构
